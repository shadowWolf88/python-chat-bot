# python-chat-bot - Complete User Guide

## Table of Contents
- [For Patients](#for-patients)
  - [Getting Started](#getting-started-patients)
  - [Therapy Chat](#therapy-chat)
  - [Daily Mood Tracking](#daily-mood-tracking)
  - [Gratitude Journal](#gratitude-journal)
  - [CBT Tools](#cbt-tools)
  - [Clinical Assessments](#clinical-assessments)
  - [Pet Game](#pet-game)
  - [Community Support](#community-support)
  - [Safety Planning](#safety-planning)
  - [Progress Insights](#progress-insights)
- [For Clinicians](#for-clinicians)
  - [Getting Started](#getting-started-clinicians)
  - [Patient Management](#patient-management)
  - [Viewing Patient Data](#viewing-patient-data)
  - [Therapy Notes](#therapy-notes)
  - [Notifications](#notifications)

---

# For Patients

## Getting Started (Patients)

### Registration

1. **Click "Patient Sign In"** on the landing page
2. **Fill out the registration form**:
   - Full Name (required)
   - Date of Birth (required)
   - Medical Conditions/Diagnosis (required) - Be honest here, it helps your clinician
   - Username (required)
   - Password (minimum 8 characters, must include number, letter, and special character)
   - 4-digit PIN (for two-factor authentication)
   - Email address
   - Phone number
   - Select your assigned clinician from the dropdown

3. **Accept the disclaimer** - Read carefully, this covers privacy and crisis support
4. **Wait for approval** - Your clinician will approve your account (you'll get a notification)

### Login

1. Enter your **username and password**
2. Enter your **4-digit PIN** (2FA security)
3. ‚úÖ **Check "Remember Me"** to stay logged in across sessions
4. Without "Remember Me", you'll stay logged in until you close the browser tab

### Your First Login

When you first log in, the AI therapy companion will:
- Create your personal memory bank
- Send you a personalized welcome message
- Ask about what brings you here today

The AI remembers everything across sessions - your moods, assessments, gratitude entries, and clinician notes.

---

## Therapy Chat

**Location**: Default tab when you log in (üí¨ Therapy Chat)

### How It Works

- **AI-powered conversations** tailored to mental health support
- The AI has access to your complete history:
  - Recent mood logs
  - Clinical assessment scores
  - CBT exercises you've done
  - Gratitude entries
  - Your clinician's therapy notes
  - Safety alerts and concerns

### Best Practices

- **Be honest** - The AI won't judge you
- **Share what you're feeling** - The more context, the better the support
- **Ask for coping strategies** - The AI can suggest CBT techniques, grounding exercises, etc.
- **Your conversations are private** - Only you and your clinician can see them

### Crisis Support

If the AI detects crisis language (suicidal thoughts, self-harm, etc.):
- It will **immediately offer crisis resources**
- Your **clinician gets notified automatically**
- Safety hotlines are provided
- **This is NOT a substitute for 911** - In emergencies, call emergency services

---

## Daily Mood Tracking

**Location**: üìä Mood Tracking tab

### Logging Your Mood

**You can only log mood ONCE per day** - This encourages mindful reflection

1. **Select your mood** (1-10 scale)
   - 1-3: Low mood
   - 4-6: Moderate
   - 7-10: Good mood

2. **Track your self-care**:
   - Hours of sleep
   - Medications taken (name, strength, quantity)
   - Water intake (pints)
   - Exercise (minutes)
   - Time spent outside (minutes)
   - Notes about your day

3. **Click "Log Mood"**

### What Happens Next

- ‚úÖ Your pet gets rewarded (+13 happiness, +8 energy, 5 coins, 15 XP)
- üìä Your mood is tracked for insights
- üß† AI memory updates with your current state
- üîî If your mood is very low, your clinician may be notified

### View Your History

- Scroll down to see past mood logs
- Look for patterns over time
- Your clinician can see this data too

---

## Gratitude Journal

**Location**: üåü Gratitude tab

### Why Gratitude Matters

Research shows daily gratitude practice:
- Reduces depression symptoms
- Improves sleep quality
- Increases overall happiness
- Builds resilience

### How to Use

1. **Write 1-3 things you're grateful for**
   - Can be small: "My morning coffee"
   - Can be big: "Supportive friend who listened"
   - No judgment - anything counts

2. **Click "Save Entry"**

### Rewards

- ‚úÖ Pet gets rewarded (+13 happiness, +8 energy, 5 coins, 15 XP)
- üß† AI learns what brings you joy
- üìà Track your gratitude journey over time

---

## CBT Tools

**Location**: üß† CBT Tools tab

### What is CBT?

Cognitive Behavioral Therapy helps you identify and challenge negative thought patterns.

### Thought Record Exercise

1. **Describe the situation** - What happened?
   - Example: "My friend didn't text me back"

2. **Identify the automatic thought** - What did you think?
   - Example: "They don't care about me anymore"

3. **Find evidence against it** - Challenge the thought
   - Example: "They were probably busy. They've been a good friend for years"

4. **Click "Save Record"**

### Rewards

- ‚úÖ Pet gets **bonus rewards** (+15 coins, +20 XP for CBT work)
- üß† AI learns your thinking patterns
- üí™ You build healthier thought habits

### Viewing Past Records

Scroll down to see your CBT history and track your progress in reframing thoughts.

---

## Clinical Assessments

**Location**: üìã Clinical Assessments tab

### Available Assessments

1. **PHQ-9** (Depression)
   - 9 questions about depression symptoms
   - Scored 0-27
   - **Once per fortnight** (14 days)

2. **GAD-7** (Anxiety)
   - 7 questions about anxiety symptoms
   - Scored 0-21
   - **Once per fortnight** (14 days)

### Why The Limit?

Assessments can only be taken every 14 days to:
- Prevent assessment fatigue
- Allow time for treatment changes to take effect
- Provide meaningful data points

### Taking an Assessment

1. **Answer each question honestly** (0-3 scale)
   - 0: Not at all
   - 1: Several days
   - 2: More than half the days
   - 3: Nearly every day

2. **Click "Submit Assessment"**

### What Happens Next

- üìä Your score and severity level are calculated
- üîî **You get notified**: "PHQ-9 completed. Score: X (Severity). Next available in 14 days."
- üîî **Your clinician gets notified**: "Patient [you] completed PHQ-9. Score: X (Severity)."
- ‚úÖ Pet gets **big rewards** (+20 coins, +30 XP for completing assessment)
- üß† AI updates with your current severity level

### Severity Levels

**PHQ-9 (Depression)**:
- 0-4: Minimal
- 5-9: Mild
- 10-14: Moderate
- 15-19: Moderately Severe
- 20-27: Severe

**GAD-7 (Anxiety)**:
- 0-4: Minimal
- 5-9: Mild
- 10-14: Moderate
- 15-21: Severe

---

## Pet Game

**Location**: üêæ Pet tab

### Your Virtual Pet Companion

Your pet is a visual representation of your self-care journey!

### Creating Your Pet

First-time only:
1. Choose a name
2. Pick a species (Dog, Cat, Rabbit, Fox, Panda, Penguin)
3. Select gender (he/him, she/her, they/them)

### Pet Attributes

Your pet has 4 main attributes (0-100 scale):

- **Hunger** üçΩÔ∏è - Keeps pet fed and healthy
- **Happiness** üòä - Shows emotional wellbeing
- **Energy** ‚ö° - Pet's vitality and alertness
- **Hygiene** üõÅ - Cleanliness and health

### How Attributes Work

**Every activity you do gives +3 to ALL attributes!**

Plus specific bonuses:
- Mood logging: +13 happiness, +8 energy
- Gratitude: +13 happiness, +8 energy
- CBT: +13 all attributes
- Assessments: +13 all attributes

**Attributes decay gently over time:**
- 0.3 points per hour (~7 points per day)
- Minimum value: 20 (pet won't look severely neglected)
- This encourages regular self-care without pressure

### Earning Coins & XP

**Coins** ü™ô - Buy food and items in the shop
- Mood/Gratitude: 5 coins
- CBT: 15 coins
- Assessments: 20 coins
- Walking: 15-25 coins

**XP** ‚≠ê - Pet evolution progress
- Mood/Gratitude: 15 XP
- CBT: 20 XP
- Assessments: 30 XP

### Pet Evolution Stages

- **Baby** (0-499 XP) ü•ö
- **Child** (500-1499 XP) üê£
- **Adult** (1500+ XP) ü¶Ö

### Taking Your Pet for a Walk

1. **Click "Adventure (30 min walk)"**
2. Pet disappears for **exactly 30 minutes**
3. **Come back after 30 minutes** and click "Check Return"

**Walking Rewards:**
- ü™ô 15-25 coins (random)
- üéÅ Random gift: üå∏ flower, üçÉ leaf, ü™® pebble, ü¶ã butterfly, or üåü gem
- üí¨ Affirmation message: "You're taking great care of yourself!"
- +15 happiness, +10 energy

### The Shop

**Available Items:**
- üçé Apple (10 coins) - Restores 20 hunger
- ü•ï Carrot (15 coins) - Restores 25 hunger
- üçî Burger (20 coins) - Restores 30 hunger

More items coming soon!

### Customization

Change your pet's hat in the customization section (coming soon).

---

## Community Support

**Location**: üë• Community tab

### Peer Support Board

Connect with others on similar journeys (anonymously).

### Posting

1. Write your message (struggles, victories, questions)
2. Click "Post"
3. Others can like and support your post

### Rules

- Be kind and supportive
- No medical advice
- Respect privacy
- Report inappropriate content
- Remember: This isn't crisis support

### Liking Posts

Click the ‚ù§Ô∏è to show support (you can unlike by clicking again).

### Deleting Your Posts

Click "Delete" on your own posts if needed.

---

## Safety Planning

**Location**: üÜò Safety Plan tab

### What is a Safety Plan?

A personalized plan for managing crisis moments.

### Creating Your Plan

1. **Triggers** - What makes you feel worse?
   - Example: "Being alone for too long, stressful work deadlines"

2. **Coping Strategies** - What helps you feel better?
   - Example: "Deep breathing, calling a friend, going for a walk"

3. **Support Contacts** - Who can you reach out to?
   - Example: "Mom: 555-1234, Best friend Sarah: 555-5678"

4. **Professional Contacts** - Your care team
   - Example: "Therapist Dr. Smith: 555-9999, Crisis line: 988"

5. **Click "Save Plan"**

### Accessing Your Plan

Your safety plan is always available in the Safety Plan tab. In a crisis:
1. Open the app
2. Go to Safety Plan
3. Follow your steps
4. **Call 911 if in immediate danger**

---

## Appointments

**Location**: üìÖ Appointments tab

### What you can do as a patient
- View upcoming and recent appointments scheduled by your clinician
- Acknowledge an appointment (accept/decline) so your clinician knows your availability
- See clinician-confirmed attendance after the appointment (`attended`, `no_show`, or `missed`)

### Notifications
- You will receive an `appointment_new` notification when a clinician schedules an appointment
- After you respond, the clinician receives an `appointment_response` notification
- After the appointment, you will receive an `appointment_attendance` notification when your clinician confirms whether you attended

### Tips
- Keep your availability updated
- If marked as `no_show` but you did attend, contact your clinician to correct the record


## Progress Insights

**Location**: üìà Progress tab

### Available Data

- **Mood trends** over time
- **Assessment score history** (PHQ-9, GAD-7)
- **Self-care metrics** (sleep, exercise, water)
- **Pet growth** (coins earned, XP gained)

### Understanding Your Data

- Look for patterns: Do certain activities improve your mood?
- Track treatment effectiveness: Are your assessment scores improving?
- Celebrate wins: Look how far your pet has evolved!

---

## Tips for Success

### Daily Routine

1. **Log in** (stays logged in with Remember Me)
2. **Check notifications** üîî
3. **Log your mood** once per day
4. **Chat with AI** about your day
5. **Write gratitude** entry
6. **Walk your pet** (once per 30 min session)
7. **Check pet status** and feed if needed

### Weekly Goals

- Complete **1 CBT thought record**
- Engage in **community** (post or like)
- Review your **progress insights**

### Fortnightly Tasks

- **PHQ-9 assessment** (every 14 days)
- **GAD-7 assessment** (every 14 days)
- Review/update **safety plan**

---

# For Clinicians

## Getting Started (Clinicians)

### Registration

1. **Click "Clinician Sign In"** on landing page
2. **Fill out registration form**:
   - Username
   - Full Name
   - Credentials (MD, PhD, LCSW, etc.)
   - License Number
   - Password (strong password required)
   - 4-digit PIN (2FA)
   - Email
   - Phone

3. **Your account is auto-approved** (no waiting)

### Login

1. Enter **username and password**
2. Enter **4-digit PIN** (2FA)
3. ‚úÖ Check **"Remember Me"** to stay logged in

---

## Patient Management

**Location**: Automatically shown on login (Professional Dashboard)

### Pending Approvals

When patients register and select you as their clinician:
1. They appear in **"Pending Approvals"** section
2. You see: Name, username, conditions, registration date
3. Click **"Approve"** or **"Reject"**
4. Patient is notified of decision

### Your Patient List

Once approved, patients appear in **"Your Patients"** section:
- Full name
- Username
- Medical conditions
- Registration date
- Click **"View Details"** to see full profile

### Appointments (Clinician)

- Schedule face-to-face appointments from the clinician dashboard
- Receive patient `accepted`/`declined` responses via `appointment_response` notifications
- After the session, confirm attendance using the clinician action (sets `attended`, `no_show`, or `missed`) ‚Äî this creates an `appointment_attendance` notification for the patient and updates the appointment record


---

## Viewing Patient Data

**Location**: Click "View Details" on any patient

### Available Data

**Overview Tab:**
- Full name, username, email, phone
- Date of birth
- Medical conditions/diagnosis
- Registration date
- Last login

**Mood History:**
- All mood logs with timestamps
- Sleep, medications, water, exercise, outside time
- Notes the patient wrote
- Visual mood trends

**Clinical Assessments:**
- PHQ-9 scores over time
- GAD-7 scores over time
- Severity levels
- Assessment dates

**CBT Records:**
- All thought records
- Situations, automatic thoughts, evidence
- Track patient's cognitive reframing progress

**Gratitude Entries:**
- Daily gratitude logs
- Shows what brings patient joy

**Chat History:**
- Complete AI therapy chat transcripts
- See what patient discusses with AI
- Understand concerns in patient's own words

**Safety Alerts:**
- Any crisis language detected by AI
- Timestamp and details
- Current status (open/resolved)

**Community Activity:**
- Patient's community posts
- Engagement level

---

## Therapy Notes

**Location**: "Therapy / Appointments" tab in patient detail view

### Adding Notes

1. **View patient details**
2. **Click "Therapy / Appointments" tab**
3. **Write your note** in the text area
4. ‚úÖ **Check "Highlight as important"** for key observations
5. **Click "Save Note"**

### What Happens Next

- üß† **AI memory updates immediately** - The AI will reference your notes in future conversations with the patient
- üíæ Note is saved with timestamp
- üîí Only you can see your notes (patient cannot)

### Note appears with:
- Date and time
- Your note text
- Yellow highlight (if marked important)
- Delete button

### Best Practices

- Use for session summaries
- Note treatment plan changes
- Track medication adjustments
- Flag concerning behaviors
- Document crisis interventions

**Remember**: The AI will use these notes to provide better support to your patient between sessions.

---

## Notifications

**Location**: üîî Bell icon (top right)

### Notification Types

1. **Patient Approvals**
   - "New patient [name] requested approval"
   - Click notification to go to approvals

2. **Assessment Completions**
   - "Patient [name] completed PHQ-9. Score: X (Severity)"
   - See results immediately

3. **Safety Alerts**
   - "Patient [name] may be in crisis - immediate attention needed"
   - Contains crisis language detected

4. **Patient Messages**
   - General updates about patient activity

### Managing Notifications

- Click notification to mark as read
- Unread count shows in badge
- Auto-refreshes every 30 seconds

---

## Clinical Workflow

### Daily Routine

1. **Check notifications** for alerts
2. **Review pending approvals**
3. **Monitor assessment completions**
4. **Review any safety alerts immediately**

### Patient Sessions

1. **Review patient data** before session
   - Recent moods
   - Last assessment scores
   - CBT work they've done
   - Chat transcripts for context

2. **During/after session**:
   - Add therapy notes
   - Update treatment plans
   - Document any concerns

3. **The AI will reference your notes** in its conversations with the patient

### Crisis Response

If you receive a safety alert:
1. **Contact patient immediately**
2. **Assess risk level**
3. **Follow your crisis protocol**
4. **Document in therapy notes**
5. **Consider updating patient's safety plan**

---

## Understanding The AI Companion

### What The AI Knows

The AI has access to:
- Patient's complete mood history
- All clinical assessment scores and severity
- CBT thought records
- Safety alerts
- **Your therapy notes** (last 5 notes)
- Gratitude entries
- Profile information (conditions, DOB, etc.)

### The AI's Memory Bank

Every time a patient or you do something, the AI memory updates:
- Patient logs mood ‚Üí AI knows current emotional state
- Patient does assessment ‚Üí AI knows severity level
- **You add therapy note ‚Üí AI knows your clinical observations**
- Patient does CBT ‚Üí AI knows cognitive patterns
- Patient writes gratitude ‚Üí AI knows sources of joy

### Working With The AI

**The AI is your assistant, not replacement:**
- ‚úÖ Provides 24/7 support between sessions
- ‚úÖ References YOUR clinical notes in conversations
- ‚úÖ Applies evidence-based techniques (CBT, DBT, etc.)
- ‚úÖ Detects crisis language and alerts you
- ‚ùå Does NOT diagnose
- ‚ùå Does NOT prescribe medication
- ‚ùå Does NOT replace your clinical judgment

**How to use it effectively:**
1. **Write detailed therapy notes** - The AI will use them
2. **Review chat transcripts** - See what patient discusses
3. **Use it as a "between-session support"** tool
4. **Patient outcomes improve** with this hybrid approach

---

## Data Privacy & Security

### Security Features

- **Argon2/bcrypt password hashing** (industry-standard)
- **2FA with PIN codes** (required for all logins)
- **HIPAA-compliant data storage**
- **Encrypted data at rest**
- **Audit logs** for all actions
- **Role-based access** (patients can't see your notes)

### Your Responsibilities

- Keep your PIN secure
- Don't share login credentials
- Log out on shared computers
- Review patient data only as needed
- Follow your organization's HIPAA policies

### Patient Privacy

- Patients cannot see:
  - Your therapy notes
  - Other patients' data
  - Clinical dashboard

- Patients CAN see:
  - Their own mood logs, assessments, CBT records
  - AI chat transcripts (their conversations)
  - Community posts (anonymous)

---

## Support & Contact

### Technical Issues

- Check your internet connection
- Try logging out and back in
- Clear browser cache
- Use supported browsers: Chrome, Firefox, Safari, Edge

### Clinical Questions

Contact your clinical supervisor or organization administrator.

### Crisis Resources

**If patient is in immediate danger:**
- Call 911
- Contact mobile crisis team
- Use emergency hold procedures per your protocol

**Crisis Resources to Share:**
- National Suicide Prevention Lifeline: **988**
- Crisis Text Line: Text HOME to **741741**
- Emergency: **911**

---

## Tips for Clinicians

### Maximizing Patient Outcomes

1. **Encourage daily app use** - More data = better insights
2. **Review assessments regularly** - Track treatment effectiveness
3. **Write meaningful therapy notes** - The AI uses them to support your patient
4. **Monitor safety alerts** - Enable push notifications if possible
5. **Praise progress** - Mention pet growth, completed CBT exercises, etc.

### Common Patient Questions

**"How often should I use the app?"**
- Daily for mood tracking and gratitude
- As needed for AI chat support
- Walk pet daily (fun motivation!)
- Assessments every 14 days

**"Can my therapist see everything?"**
- Yes, your clinician sees all your activity
- Therapy notes are clinician-only
- This transparency helps treatment

**"Is the AI replacing my therapist?"**
- No! It's support between sessions
- Your therapist guides your care
- AI uses your therapist's notes

**"What if I'm in crisis?"**
- Call 911 or go to ER
- Call/text crisis hotlines (988)
- App will alert your therapist
- Use your safety plan

---

## Conclusion

Healing Space combines evidence-based mental health practices with engaging gamification and AI support. As a clinician, you maintain full clinical oversight while empowering patients with 24/7 support tools.

**Remember**: This tool augments your practice - it doesn't replace the therapeutic relationship you build with your patients.

**Questions?** Contact your system administrator.

---

*Last Updated: January 17, 2026*
*Version: 2.0*

## Suggested Enhancements (Clinicians & Patients)

Below are short, prioritized suggestions for features to improve clinician workflows and patient experience. Each item includes a brief rationale and where to start in the codebase.

### For Clinicians (priority order)
- **Telehealth / Video integration** ‚Äî Add secure video calls (Jitsi/Zoom SDK). Rationale: many sessions are remote; would reduce context switching. Start: create a `telehealth` service and store meeting metadata in `appointments` (see `api.py` appointments endpoints).
- **Appointment rescheduling & patient self-scheduling** ‚Äî Allow patients to propose alternate slots and let clinicians confirm. Rationale: reduces admin burden. Start: extend `/api/appointments` with `reschedule` and add `patient_proposed_times` field in `appointments` table.
- **Session templates & structured notes** ‚Äî Provide note templates (session summary, risk assessment). Rationale: speeds documentation and improves consistency. Start: add templates in UI and store `clinician_notes` entries with a `template_id`.
- **Outcomes dashboard & exportable reports** ‚Äî Aggregated PHQ-9/GAD-7 trends and CSV export for audits. Rationale: supports outcomes measurement. Start: extend `/api/analytics/dashboard` to include CSV export endpoints using `export_training_data.py` pattern.
- **Batch PDF/email delivery** ‚Äî Generate and email progress reports to patients before appointments. Rationale: saves time. Start: reuse PDF generator and `secure_transfer.py`/SMTP helpers.

### For Patients (priority order)
- **In-app secure messaging (asynchronous)** ‚Äî Two-way messaging with read receipts. Rationale: improves engagement and clarifications between sessions. Start: add `messages` table and endpoints; copy patterns from `notifications` and `chat_history`.
- **Patient portal / self-scheduling** ‚Äî Allow patients to see clinician availability and request slots. Rationale: reduces back-and-forth. Start: surface clinician availability in clinician profile and add `self-schedule` flow calling `/api/appointments`.
- **Calendar sync (Google/iCal)** ‚Äî Export and subscribe to appointments. Rationale: reduces missed appointments. Start: add iCal export endpoint and optional Google Calendar integration using OAuth.
- **Medication & reminder module** ‚Äî Track meds and set reminders. Rationale: supports adherence. Start: new `medications` table and cron job for reminders (see `send_mood_reminders.sh`).
- **Goals & treatment plan tracker** ‚Äî Patient-facing goals updated by clinician. Rationale: supports collaborative care. Start: add `treatment_plans` and link to `clinician_notes` and `appointments`.

### Implementation notes & pointers
- Notifications: use the existing `notifications` table (`api.py`) for user-facing messages; new features should reuse this system and `log_event()` audit calls.
- Appointments: the `appointments` table and `/api/appointments` endpoints in `api.py` are the canonical place to extend scheduling features.
- Privacy: follow existing encryption (`encrypt_text()`/`decrypt_text()`) when storing PII; update `training_data_manager.py` for any new training-data collection.
- Background jobs: reuse cron scripts (see `send_mood_reminders.sh`) or add a small scheduler (e.g., `apscheduler`) for reminders and batch tasks.

If you want, I can open PR-ready commits implementing one prioritized feature (pick which one) and add minimal UI hooks in `templates/index.html` and API tests.
