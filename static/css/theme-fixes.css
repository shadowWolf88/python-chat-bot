/**
 * ============================================
 * Theme Fixes — Targeted Inline-Style Overrides
 * ============================================
 *
 * This file corrects only elements that carry
 * hardcoded inline styles (color, background,
 * border). Component classes (buttons, cards,
 * modals, tabs, toasts) are handled by
 * components.css / messaging.css and must NOT
 * be overridden here.
 *
 * Rule: only use !important where an inline
 * style attribute would otherwise win.
 * ============================================
 */

/* ============================================
   DARK MODE ROOT
   ============================================ */

[data-theme="dark"] {
    color-scheme: dark;
}

/* ============================================
   FORM INPUTS — hardcoded border/bg overrides
   ============================================ */

input[type="text"],
input[type="email"],
input[type="password"],
input[type="date"],
input[type="number"],
input[type="tel"],
textarea,
select {
    background: var(--bg-input) !important;
    color: var(--text-primary) !important;
    border-color: var(--border-primary) !important;
}

input::placeholder,
textarea::placeholder {
    color: var(--text-muted) !important;
}

input:focus,
textarea:focus,
select:focus {
    border-color: var(--border-focus) !important;
    outline: none !important;
}

/* Inline border-color overrides */
[style*="border: 2px solid #e0e0e0"],
[style*="border:2px solid #e0e0e0"] {
    border-color: var(--border-primary) !important;
}

/* Dark mode inputs */
[data-theme="dark"] input,
[data-theme="dark"] textarea,
[data-theme="dark"] select {
    color-scheme: dark;
    background: var(--bg-input) !important;
    color: var(--text-primary) !important;
}

/* ============================================
   HARDCODED BACKGROUND OVERRIDES
   Only target inline style attributes
   ============================================ */

[style*="background: #f9f9f9"],
[style*="background: #f8f9fa"],
[style*="background: #fafafa"],
[style*="background:#f9f9f9"],
[style*="background:#f8f9fa"] {
    background: var(--bg-secondary) !important;
}

[style*="background: white"],
[style*="background: #ffffff"],
[style*="background:#fff"] {
    background: var(--bg-primary) !important;
}

/* ============================================
   HARDCODED TEXT COLOR OVERRIDES
   Only target inline style attributes
   ============================================ */

small,
.form-help,
[style*="color: #666"],
[style*="color: #999"],
[style*="color:#666"],
[style*="color:#999"] {
    color: var(--text-secondary) !important;
}

/* Old brand colours in inline styles */
[style*="color: #667eea"],
[style*="color:#667eea"] {
    color: var(--brand-primary) !important;
}

/* ============================================
   STATUS COLOURS — inline style overrides
   ============================================ */

[style*="background: #fff3cd"],
[style*="background: #ffebee"],
[style*="background:#fff3cd"] {
    background: var(--status-warning-bg) !important;
    border-color: var(--status-warning-border) !important;
}

[style*="color: #c62828"],
[style*="color: #e74c3c"],
[style*="border-left: 4px solid #e74c3c"] {
    color: var(--status-error) !important;
    border-color: var(--status-error) !important;
}

[style*="color: #27ae60"],
[style*="color: #2f855a"] {
    color: var(--status-success) !important;
}

/* ============================================
   SECONDARY BUTTONS — inline style overrides
   ============================================ */

[style*="background: #f0f0f0"],
[style*="background: #e0e0e0"] {
    background: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
}

/* ============================================
   TABLES
   ============================================ */

table {
    color: var(--text-primary);
}

table th {
    background: var(--bg-secondary) !important;
    color: var(--text-primary) !important;
}

table td {
    color: var(--text-secondary);
    border-color: var(--border-primary) !important;
}

thead tr[style*="background"] {
    background: var(--bg-secondary) !important;
}

/* ============================================
   STRENGTH INDICATORS & PROGRESS BARS
   ============================================ */

[style*="background: #e0e0e0"][style*="height"][style*="border-radius"] {
    background: var(--bg-tertiary) !important;
}

[style*="background: #dc3545"] {
    background: var(--status-error) !important;
}

/* ============================================
   CHAT & MESSAGING — index.html inline styles
   ============================================ */

.chat-container {
    background: var(--bg-primary) !important;
    border-color: var(--border-primary) !important;
}

.chat-messages {
    background: var(--bg-secondary) !important;
}

.message.ai {
    background: var(--bg-elevated) !important;
    color: var(--text-primary) !important;
    border-color: var(--border-primary) !important;
}

.message.user {
    background: var(--brand-gradient) !important;
    color: var(--text-inverse) !important;
}

.chat-input-area {
    background: var(--bg-elevated) !important;
    border-color: var(--border-primary) !important;
}

.chat-input-area textarea {
    background: var(--bg-input) !important;
    color: var(--text-primary) !important;
    border-color: var(--border-primary) !important;
}

/* ============================================
   DROPDOWN PLACEHOLDERS
   ============================================ */

[id$="Placeholder"],
.dropdown-placeholder {
    background: var(--bg-secondary) !important;
    color: var(--text-muted) !important;
    border-color: var(--border-primary) !important;
}

/* ============================================
   CLINICIAN SUBTAB BUTTONS
   ============================================ */

.clinical-subtab-btn {
    color: var(--text-secondary, #4a5568) !important;
    background: var(--bg-secondary, #f7fafc) !important;
    border-color: var(--border-primary, #e2e8f0) !important;
}

.clinical-subtab-btn:hover {
    color: var(--text-primary, #1a202c) !important;
    background: var(--bg-hover, #edf2f7) !important;
}

/* Active subtab — gradient */
.clinical-subtab-btn.active,
.clinical-subtab-btn[style*="background: #667eea"],
.clinical-subtab-btn[style*="background:#667eea"],
.clinical-subtab-btn[style*="background: #6366f1"],
.clinical-subtab-btn[style*="background:#6366f1"] {
    background: var(--brand-gradient) !important;
    color: #ffffff !important;
    border-color: var(--brand-primary, #6366f1) !important;
}

[data-theme="dark"] .clinical-subtab-btn {
    color: var(--text-primary, #f1f1f8) !important;
    background: var(--bg-secondary, #1a1a36) !important;
    border-color: var(--border-primary, #2a2a4a) !important;
}

[data-theme="dark"] .clinical-subtab-btn.active,
[data-theme="dark"] .clinical-subtab-btn[style*="background: #667eea"],
[data-theme="dark"] .clinical-subtab-btn[style*="background:#667eea"] {
    background: var(--brand-gradient) !important;
    color: #ffffff !important;
}

/* ============================================
   NOTIFICATIONS PANEL — DARK MODE
   ============================================ */

[data-theme="dark"] .notification-panel {
    background: var(--bg-elevated, #14142e) !important;
    border-color: var(--border-primary, #2a2a4a) !important;
    box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5) !important;
}

[data-theme="dark"] .notification-item {
    border-bottom-color: var(--border-primary, #2a2a4a) !important;
    color: var(--text-primary, #f1f1f8) !important;
}

[data-theme="dark"] .notification-item:hover {
    background: var(--bg-hover, rgba(99, 102, 241, 0.08)) !important;
}

[data-theme="dark"] .notification-item.unread {
    background: rgba(99, 102, 241, 0.12) !important;
    border-left: 3px solid var(--brand-primary, #6366f1) !important;
}

[data-theme="dark"] .notification-item strong {
    color: var(--brand-primary, #6366f1) !important;
}

[data-theme="dark"] .notification-item p {
    color: var(--text-primary, #f1f1f8) !important;
}

[data-theme="dark"] .notification-item small {
    color: var(--text-muted, #6b7280) !important;
}

[data-theme="dark"] .notification-body {
    background: var(--bg-elevated, #14142e) !important;
}

/* ============================================
   TERMINAL & CONSOLE — ALWAYS DARK
   These elements are exempt from ALL global
   colour overrides. Inline green text must
   remain visible regardless of theme.
   ============================================ */

#terminalOutput,
#terminalOutput *,
#qaTestOutput,
#qaTestOutput * {
    color: unset !important;
}

#terminalOutput {
    background: #1e1e1e !important;
    color: #00ff00 !important;
}

#qaTestOutput {
    background: #1e1e1e !important;
    color: #00ff00 !important;
}

/* ============================================
   HELPER TEXT UTILITIES
   ============================================ */

.secondary-text,
.help-text,
.meta-text {
    color: var(--text-secondary);
}

.muted-text,
.placeholder-text {
    color: var(--text-muted);
}

/* ============================================
   PRINT STYLES
   ============================================ */

@media print {
    * {
        background: white !important;
        color: black !important;
        border-color: #cccccc !important;
    }
}
