<div style="max-width: 700px; margin: 0 auto;">
    <h4 style="text-align: center; font-size: 1.8em; margin-bottom: 10px;">ğŸ’ Values Card Sort</h4>
    <p style="text-align: center; color: var(--text-secondary); margin-bottom: 30px;">Pick your top 5 values that matter most to you</p>

    <form id="valuesCardSortForm">
        <!-- Before Mood -->
        <div class="form-group" style="margin-bottom: 25px;">
            <label style="font-weight: 600; margin-bottom: 15px; display: block; text-align: center;">How are you feeling right now?</label>
            <div id="valuesCardSortMoodBefore"></div>
        </div>

        <!-- Instructions -->
        <div style="background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1)); padding: 20px; border-radius: 15px; margin-bottom: 25px;">
            <p style="margin: 0; text-align: center; font-weight: 600;">Select up to 5 values that are most important to you âœ¨</p>
        </div>

        <!-- Values List -->
        <div id="valuesList" style="display: grid; grid-template-columns: repeat(auto-fill, minmax(200px, 1fr)); gap: 12px; margin-bottom: 25px;">
            <label style="padding: 15px; background: var(--bg-input); border-radius: 10px; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: all 0.2s;">
                <input type="checkbox" name="value_family" style="width: 20px; height: 20px;">
                <span>ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦ Family</span>
            </label>
            <label style="padding: 15px; background: var(--bg-input); border-radius: 10px; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: all 0.2s;">
                <input type="checkbox" name="value_health" style="width: 20px; height: 20px;">
                <span>ğŸ’ª Health</span>
            </label>
            <label style="padding: 15px; background: var(--bg-input); border-radius: 10px; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: all 0.2s;">
                <input type="checkbox" name="value_creativity" style="width: 20px; height: 20px;">
                <span>ğŸ¨ Creativity</span>
            </label>
            <label style="padding: 15px; background: var(--bg-input); border-radius: 10px; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: all 0.2s;">
                <input type="checkbox" name="value_learning" style="width: 20px; height: 20px;">
                <span>ğŸ“š Learning</span>
            </label>
            <label style="padding: 15px; background: var(--bg-input); border-radius: 10px; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: all 0.2s;">
                <input type="checkbox" name="value_adventure" style="width: 20px; height: 20px;">
                <span>ğŸŒ Adventure</span>
            </label>
            <label style="padding: 15px; background: var(--bg-input); border-radius: 10px; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: all 0.2s;">
                <input type="checkbox" name="value_compassion" style="width: 20px; height: 20px;">
                <span>ğŸ’ Compassion</span>
            </label>
            <label style="padding: 15px; background: var(--bg-input); border-radius: 10px; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: all 0.2s;">
                <input type="checkbox" name="value_achievement" style="width: 20px; height: 20px;">
                <span>ğŸ† Achievement</span>
            </label>
            <label style="padding: 15px; background: var(--bg-input); border-radius: 10px; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: all 0.2s;">
                <input type="checkbox" name="value_authenticity" style="width: 20px; height: 20px;">
                <span>âœ¨ Authenticity</span>
            </label>
            <label style="padding: 15px; background: var(--bg-input); border-radius: 10px; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: all 0.2s;">
                <input type="checkbox" name="value_connection" style="width: 20px; height: 20px;">
                <span>ğŸ¤ Connection</span>
            </label>
            <label style="padding: 15px; background: var(--bg-input); border-radius: 10px; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: all 0.2s;">
                <input type="checkbox" name="value_freedom" style="width: 20px; height: 20px;">
                <span>ğŸ•Šï¸ Freedom</span>
            </label>
            <label style="padding: 15px; background: var(--bg-input); border-radius: 10px; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: all 0.2s;">
                <input type="checkbox" name="value_contribution" style="width: 20px; height: 20px;">
                <span>ğŸŒ± Contribution</span>
            </label>
            <label style="padding: 15px; background: var(--bg-input); border-radius: 10px; cursor: pointer; display: flex; align-items: center; gap: 10px; transition: all 0.2s;">
                <input type="checkbox" name="value_spirituality" style="width: 20px; height: 20px;">
                <span>ğŸ™ Spirituality</span>
            </label>
        </div>

        <!-- After Mood -->
        <div class="form-group" style="margin-bottom: 25px;">
            <label style="font-weight: 600; margin-bottom: 15px; display: block; text-align: center;">How do you feel after clarifying your values? ğŸŒŸ</label>
            <div id="valuesCardSortMoodAfter"></div>
        </div>

        <!-- Action Buttons -->
        <div style="display: flex; gap: 12px;">
            <button type="button" class="btn btn-secondary" onclick="resetValuesCardSort()" style="flex: 1;">ğŸ”„ Reset</button>
            <button type="button" class="btn" onclick="saveValuesCardSort()" style="flex: 2; background: var(--success-color); font-size: 1.1em;">ğŸ’¾ Save Values</button>
        </div>
    </form>
    <div id="valuesCardSortStatus"></div>
</div>

<script>
function saveValuesCardSort() {
    saveCBTToolData('ValuesCardSort');
}

function resetValuesCardSort() {
    document.getElementById('valuesCardSortForm').reset();
    const beforeBtns = document.querySelectorAll('#valuesCardSortMoodBefore .emoji-mood-btn');
    const afterBtns = document.querySelectorAll('#valuesCardSortMoodAfter .emoji-mood-btn');
    beforeBtns.forEach(btn => btn.classList.remove('selected'));
    afterBtns.forEach(btn => btn.classList.remove('selected'));
}

// Initialize mood selectors
setTimeout(() => {
    if (document.getElementById('valuesCardSortMoodBefore') && !document.querySelector('#valuesCardSortMoodBefore .emoji-mood-selector')) {
        createEmojiMoodSelector('valuesCardSortMoodBefore');
        const beforeInput = document.getElementById('valuesCardSortMoodBefore_value');
        if (beforeInput) beforeInput.name = 'mood_before_value';
    }
    if (document.getElementById('valuesCardSortMoodAfter') && !document.querySelector('#valuesCardSortMoodAfter .emoji-mood-selector')) {
        createEmojiMoodSelector('valuesCardSortMoodAfter');
        const afterInput = document.getElementById('valuesCardSortMoodAfter_value');
        if (afterInput) afterInput.name = 'mood_rating';
    }

    // Add hover effect to value labels
    const labels = document.querySelectorAll('#valuesList label');
    labels.forEach(label => {
        label.addEventListener('mouseenter', () => {
            label.style.background = 'var(--bg-hover)';
            label.style.transform = 'translateY(-2px)';
        });
        label.addEventListener('mouseleave', () => {
            label.style.background = 'var(--bg-input)';
            label.style.transform = 'translateY(0)';
        });
    });
}, 100);
</script>
